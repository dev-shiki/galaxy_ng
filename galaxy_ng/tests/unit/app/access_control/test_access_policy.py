import sys

# Add project root to path if needed
project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), "../.."))
if project_root not in sys.path:
    sys.path.insert(0, project_root)
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "galaxy_ng.settings")
from django.conf import settingsimport pytest
import os
import sys
import pytest
from django.contrib.auth import get_user_model
from django.test import TestCase
from django.urls import reverse
from rest_framework import status
from rest_framework.test import APITestCase
from galaxy_ng.app import models
from galaxy_ng.app.access_control import access_policy
from galaxy_ng.app.access_control.statements import STANDALONE_STATEMENTS, INSIGHTS_STATEMENTS
from galaxy_ng.app.constants import COMMUNITY_DOMAINS
from galaxy_ng.app.utils.rbac import get_v3_namespace_owners
from galaxy_ng.app.api.v1.models import LegacyNamespace
from galaxy_ng.app.api.v1.models import LegacyRole
from pulp_ansible.app.models import CollectionVersion
from pulp_container.app.models import ContainerDistribution
from pulpcore.plugin.util import get_objects_for_user
from pulpcore.plugin.models import Role
from pulpcore.plugin.models import GroupRole
from pulpcore.plugin.models import UserRole
from pulpcore.plugin.models import Permission
from pulpcore.plugin.models import Repository
from pulpcore.plugin.models import Distribution
from pulpcore.plugin.models import RepositoryVersion
from pulpcore.plugin.models import Content
from pulpcore.plugin.models import Artifact
from pulpcore.plugin.models import ArtifactVersion
from pulpcore.plugin.models import File
from pulpcore.plugin.models import FileMetadata
from pulpcore.plugin.models import FileMetadataVersion
from pulpcore.plugin.models import FileArtifact
from pulpcore.plugin.models import FileArtifactVersion
from pulpcore.plugin.models import FileContent
from pulpcore.plugin.models import FileContentVersion
from pulpcore.plugin.models import FileVersion
from pulpcore.plugin.models import FileVersionVersion
from pulpcore.plugin.models import FileVersionArtifact
from pulpcore.plugin.models import FileVersionArtifactVersion
from pulpcore.plugin.models import FileVersionContent
from pulpcore.plugin.models import FileVersionContentVersion
from pulpcore.plugin.models import FileVersionVersionArtifact
from pulpcore.plugin.models import FileVersionVersionArtifactVersion
from pulpcore.plugin.models import FileVersionVersionContent
from pulpcore.plugin.models import FileVersionVersionContentVersion
from pulpcore.plugin.models import FileVersionVersionFile
from pulpcore.plugin.models import FileVersionVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileArtifact
from pulpcore.plugin.models import FileVersionVersionFileArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileContent
from pulpcore.plugin.models import FileVersionVersionFileContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionContent
from pulpcore.plugin.models import FileVersionVersionFileVersionContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFile
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFile
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFile
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFile
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFile
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionFile
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileArtifactVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileContent
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileContentVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersion
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionArtifact
from pulpcore.plugin.models import FileVersionVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionFileVersionArtifactVersion
from pulpcore.plugin